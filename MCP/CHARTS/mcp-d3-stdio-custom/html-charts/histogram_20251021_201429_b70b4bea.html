<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<title>Sample Histogram</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
    body{font-family:Inter,Segoe UI,Arial,sans-serif;margin:20px;background:#f6f7fb;color:#111}
    .container{max-width:1100px;margin:0 auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 6px 30px rgba(20,30,60,0.08)}
    h2{margin:0 0 12px 0;font-size:18px}
    .viz{width:100%;height:520px}
    .legend{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .legend-item{display:flex;align-items:center;gap:8px;font-size:13px}
    .sw{width:14px;height:14px;border-radius:3px}
</style>
</head>
<body>
<div class='container'>
<h2>Sample Histogram</h2>
<div id='viz' class='viz'></div>
<div id='legend' class='legend' aria-hidden='false'></div>
<div style='margin-top:8px;color:#666;font-size:13px'>Generated by local D3 MCP server</div>
</div>
<script src='https://d3js.org/d3.v7.min.js'></script>
<script>
const data = {"values": [1, 2, 2, 3, 3, 3, 4, 5, 5, 6, 7, 8], "bins": 6};

(function(){
const container = d3.select('#viz'); const payload = data||{};
const values = payload.values || payload.data || [];
if(!values.length){ container.append('div').text('No histogram data (expect values: [])'); return; }
const bins = payload.bins || 10;
const rect = container.node().getBoundingClientRect(); const width = Math.max(320, rect.width)-40; const height = Math.max(240, rect.height)-40;
const svg = container.append('svg').attr('width', width).attr('height', height).append('g').attr('transform','translate(20,10)');
const x = d3.scaleLinear().domain(d3.extent(values)).range([0, width-60]);
const histogram = d3.bin().domain(x.domain()).thresholds(bins);
const binsData = histogram(values);
const y = d3.scaleLinear().domain([0, d3.max(binsData, d=>d.length)||1]).range([height-60,0]);
svg.selectAll('rect').data(binsData).enter().append('rect').attr('x', d=>x(d.x0)).attr('y', d=>y(d.length)).attr('width', d=>Math.max(1, x(d.x1)-x(d.x0)-1)).attr('height', d=>height-60 - y(d.length)).attr('fill','#69b3a2');
svg.append('g').attr('transform',`translate(0,${height-60})`).call(d3.axisBottom(x));
})();

</script>
</body>
</html>
